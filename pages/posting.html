<!DOCTYPE html>

<html>
    <head>

        <meta charset = "UTF-8">

        <title>Postings</title>

    </head>

    <body>

    <script type = "text/javascript">

        function sayHello() {
            var http = new XMLHttpRequest();
            var url = '/sayHello';
            // var params = 'name=' + document.getElementById("input").value;
            var params = 'topic=' + document.getElementById("topic").value
            + '&data=' + document.getElementById("data").value;
                
            http.open('POST', url, true);

            http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

            http.onreadystatechange = function() {
                if(http.readyState == 4 && http.status == 200) {

                    alert("message received!");
                    // var response = JSON.parse(http.responseText);
                    // document.getElementById("answer").value = response.answer;  
                }
            };

            http.send(params);
            };

        // second function to update
        function getData() {
            var http = new XMLHttpRequest();
            var url = '/getData';

            http.open('GET', url, true);

            http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

            http.onreadystatechange = function() {
                if(http.readyState == 4 && http.status == 200) {

                    // alert("message received!");
                    var response = JSON.parse(http.responseText); 
                    document.getElementById("answer").value = response.answer; 
                    
                }
            };

            http.send();
            setTimeout('getData()', 100);
        }

    getData();

    </script>

        <h1>Postings</h1>

        <!-- <p> <iframe src = "posts.txt" height = 400 width = 95%></iframe></p> -->

        <p></p>

        <input id="topic" type="text" name="topic">

        <br><br>

        <input id="data" type="text" name="data">

        <br><br>

        <button onclick="sayHello()">Create New Post</button>

        <br><br>

        <textarea id = "answer" rows = "20" cols = "50"> </textarea>


    </body>

</html>